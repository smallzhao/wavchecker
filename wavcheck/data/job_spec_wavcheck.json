{
  "apiVersion": "batch/v1",
  "kind": "Job",
  "metadata": {
    "name": "${jobName}",
    "namespace": "dataproc",
    "labels": {
      "app": "seldon",
      "ksonnet.io/component": "${jobName}"
    },
    "annotations": {
      "batch_version": "v1",
      "project_name": "${jobName}"
    }
  },
  "spec": {
    "template": {
      "spec": {
        "containers": [
          {
            "name": "${jobName}",
            "image": "${image}",
            "imagePullPolicy": "IfNotPresent",
            "volumeMounts": [
              {
                "mountPath": "/input",
                "name": "source-data-storage"
              },
              {
                "mountPath": "/result",
                "name": "result-data-storage"
              }
            ],
            "env": [
              {
                "name": "taskinfos",
                "value": "${group}"
              },
              {
                "name": "args",
                "value": "${args}"
              }
            ]
          }
        ],
        "imagePullSecrets": [
          {
            "name": "regcred-secret"
          }
        ],
        "volumes": [
          {
            "name": "result-data-storage",
            "flexVolume": {
              "driver": "fstab/cifs",
              "fsType": "cifs",
              "secretRef": {
                "name": "${cifsSecretRef}"
              },
              "options": {
                "networkPath": "${resultPath}",
                "mountOptions": ""
              }
            }
          }
        ],
        "restartPolicy": "Never"
      }
    }
  }
}
